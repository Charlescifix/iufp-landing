<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IUFP — Student Application (Modern UX)</title>
  <meta name="description" content="A modern, single-page, multi-step IUFP application with segmented answer tabs, floating labels, autosave, and clear validation." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --brand-nav-bg:#0b2447; --brand-nav-text:#ffffff; --brand-primary:#19376d; --brand-on-primary:#ffffff;
      --brand-footer-bg:#0b2447; --brand-footer-text:#ffffff;
      --tint-a: rgba(25,55,109,.06); --tint-b: rgba(20,184,166,.12); --tint-c: rgba(167,139,250,.14); --tint-d: rgba(11,36,71,.05);
      --ok:#16a34a; --warn:#b45309; --err:#dc2626;
    }
    html,body{scroll-behavior:smooth}
    .brand-header{background-color:var(--brand-nav-bg);color:var(--brand-nav-text)}
    .brand-link{color:var(--brand-nav-text)}
    .brand-footer{background-color:var(--brand-footer-bg);color:var(--brand-footer-text)}
    .crystal{backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
      background:linear-gradient(135deg,rgba(255,255,255,.18),rgba(255,255,255,.06));
      border:1px solid rgba(0,0,0,.06);box-shadow:0 10px 24px rgba(0,0,0,.10);transition:transform .12s ease, box-shadow .2s ease}
    .crystal:hover{transform:translateY(-1px) scale(1.005)}
    /* Modern Floating label inputs - Responsive with enhanced contrast */
    .fl{position:relative; margin-bottom:1rem}
    @media (min-width: 768px) {
      .fl { margin-bottom:1.5rem }
    }
    .fl input,.fl select,.fl textarea{
      width:100%;background:#ffffff;border:2px solid rgba(0,0,0,.12);
      border-radius:16px;padding:1.25rem 1.25rem 0.85rem;outline:none;
      font-size:1rem;transition:all 0.3s ease;
      box-shadow:0 1px 3px rgba(0,0,0,.05);
    }
    .fl input:focus,.fl select:focus,.fl textarea:focus{
      border-color:#19376d; box-shadow:0 0 0 4px rgba(25,55,109,.12);
      transform:scale(1.02);
    }
    .fl label{
      position:absolute;left:1.25rem;top:1.1rem;padding:0 .5rem;
      background:#ffffff;border-radius:8px;color:#475569;
      font-weight:600;pointer-events:none;transition:all .3s ease;
      font-size:0.95rem;
    }
    .fl input::placeholder{opacity:0} .fl textarea::placeholder{opacity:0}
    .fl input:focus+label,.fl input:not(:placeholder-shown)+label,
    .fl select:focus+label,.fl select:not([value=""])+label,
    .fl textarea:focus+label,.fl textarea:not(:placeholder-shown)+label{
      top:-0.7rem; font-size:0.8rem; color:#19376d; 
      box-shadow:0 2px 8px rgba(25,55,109,.15);
      background:linear-gradient(135deg, #ffffff, #f8fafc);
    }
    /* Modern Segmented answer tabs - Enhanced for light background */
    .seg{display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:0.75rem}
    @media (min-width: 768px) {
      .seg { gap:0.75rem; margin-bottom:1rem }
    }
    .seg input{display:none}
    .seg label{
      cursor:pointer;border:2px solid rgba(0,0,0,.12);
      border-radius:10px;padding:0.5rem 0.875rem;font-weight:700;
      background:linear-gradient(135deg, #ffffff, #f8fafc);
      transition:all 0.3s ease;font-size:0.8rem;
      box-shadow:0 2px 8px rgba(0,0,0,.06);
    }
    @media (min-width: 768px) {
      .seg label {
        border-radius:12px;
        padding:0.75rem 1.25rem;
        font-size:0.9rem;
      }
    }
    .seg label:hover{
      transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1);
      border-color:rgba(25,55,109,.3);
    }
    .seg input:checked+label{
      background:linear-gradient(135deg, #19376d, #1e40af);
      color:#fff;border-color:transparent;
      transform:translateY(-2px);box-shadow:0 6px 16px rgba(25,55,109,.3);
    }
    /* Modern Elective cards - Enhanced for light background */
    .choice{
      border:2px solid rgba(0,0,0,.08);border-radius:12px;
      padding:0.75rem 1rem;background:linear-gradient(135deg, #ffffff, #fefefe);
      display:flex;gap:0.5rem;align-items:center;
      transition:all 0.3s ease;cursor:pointer;
      box-shadow:0 2px 8px rgba(0,0,0,.06);
      margin-bottom:0.375rem;font-size:0.9rem;
    }
    @media (min-width: 768px) {
      .choice {
        border-radius:16px;
        padding:1rem 1.25rem;
        gap:0.75rem;
        margin-bottom:0.5rem;
        font-size:1rem;
      }
    }
    .choice input{width:1.25rem;height:1.25rem;accent-color:#19376d}
    .choice:hover{
      transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,.1);
      border-color:rgba(25,55,109,.3);
    }
    .choice:has(input:checked){
      background:linear-gradient(135deg, rgba(25,55,109,.08), rgba(25,55,109,.04));
      border-color:#19376d;box-shadow:0 6px 20px rgba(25,55,109,.2);
    }
    .step{
      display:none;opacity:0;transform:translateY(20px);
      transition:all 0.4s ease;
    }
    .step.active{
      display:block;opacity:1;transform:translateY(0);
      animation:slideIn 0.5s ease forwards;
    }
    @keyframes slideIn {
      from { opacity:0; transform:translateY(30px); }
      to { opacity:1; transform:translateY(0); }
    }
    /* Responsive button system */
    .btn{
      border-radius:12px;padding:0.75rem 1.5rem;font-weight:700;
      transition:all 0.3s ease;border:none;cursor:pointer;
      font-size:0.875rem;min-height:44px;
    }
    @media (min-width: 768px) {
      .btn {
        border-radius:14px;
        padding:1rem 2rem;
        font-size:0.95rem;
        min-height:48px;
      }
    }
    .btn-next{
      background:linear-gradient(135deg, #19376d, #1e40af);
      color:#fff;box-shadow:0 4px 16px rgba(25,55,109,.3);
    }
    .btn-next:hover{
      transform:translateY(-2px);box-shadow:0 8px 24px rgba(25,55,109,.4);
    }
    .btn-prev{
      background:linear-gradient(135deg, #f8fafc, #e2e8f0);
      color:#475569;box-shadow:0 2px 8px rgba(0,0,0,.1);
      border:2px solid rgba(0,0,0,.06);
    }
    .btn-prev:hover{
      transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.15);
    }
    /* Responsive pills */
    .pill{border:1px solid rgba(0,0,0,.08); border-radius:9999px; padding:.2rem .5rem; font-weight:600; background:#fff; font-size:0.75rem}
    @media (min-width: 768px) {
      .pill { padding:.25rem .6rem; font-weight:700; font-size:0.875rem }
    }
    /* Modern sticky progress bar - Enhanced for light background */
    .stickybar{
      position:sticky;top:0;z-index:50;
      background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
      backdrop-filter:blur(12px);border-bottom:1px solid rgba(0,0,0,.06);
      box-shadow:0 2px 12px rgba(0,0,0,.08);
    }
    @media (min-width: 768px) {
      .stickybar {
        border-bottom:2px solid rgba(0,0,0,.06);
        box-shadow:0 2px 20px rgba(0,0,0,.1);
      }
    }
    .progress{
      height:8px;background:#e5e7eb;border-radius:12px;overflow:hidden;
      box-shadow:inset 0 2px 4px rgba(0,0,0,.1);
    }
    .progress>span{
      display:block;height:100%;
      background:linear-gradient(90deg,#19376d,#3b82f6,#19376d);
      border-radius:12px;transition:width 0.5s ease;
      box-shadow:0 0 8px rgba(25,55,109,.3);
    }
    /* Modern hints & errors - Responsive */
    .hint{font-size:0.8rem;color:#64748b;margin-top:0.375rem}
    @media (min-width: 768px) {
      .hint { font-size:0.85rem; margin-top:0.5rem }
    }
    .err{
      font-size:0.85rem;color:#dc2626;display:none;
      margin-top:0.5rem;padding:0.5rem 0.75rem;
      background:rgba(220,38,38,.05);border-radius:8px;
      border-left:3px solid #dc2626;
    }
    .invalid{
      border-color:#dc2626!important; 
      box-shadow:0 0 0 3px rgba(220,38,38,.12)!important;
      background:rgba(220,38,38,.02)!important;
    }
    
    /* Form sections spacing - Responsive */
    .form-group{
      margin-bottom:1.5rem;
    }
    @media (min-width: 768px) {
      .form-group {
        margin-bottom:2rem;
      }
    }
    
    /* Ensure no overlapping - Responsive */
    body {
      padding-bottom:80px;
    }
    @media (min-width: 768px) {
      body { padding-bottom:120px }
    }
    /* Table */
    .table-wrap{overflow-x:auto}
    table.fancy{width:100%; border-collapse:separate; border-spacing:0; border-radius:16px; overflow:hidden; box-shadow:0 8px 24px rgba(0,0,0,.06)}
    table.fancy thead th{text-align:left; font-weight:800; background:var(--brand-nav-bg); color:#fff; padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.1); font-size:0.875rem}
    table.fancy tbody td{padding:8px 10px; border-bottom:1px solid rgba(0,0,0,.06); font-size:0.875rem}
    @media (min-width: 768px) {
      table.fancy thead th { padding:14px 16px; font-size:1rem }
      table.fancy tbody td { padding:12px 14px; font-size:1rem }
    }
    table.fancy tbody tr:nth-child(odd){background:rgba(11,36,71,.035)}
    /* Sticky footer actions - Responsive */
    .sticky-actions{position:sticky;bottom:0;z-index:40;background:linear-gradient(0deg, rgba(255,255,255,1), rgba(255,255,255,.9));backdrop-filter:blur(6px);border-top:1px solid rgba(0,0,0,.06)}
    
    /* Navigation controls responsive */
    .nav-controls {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    @media (min-width: 640px) {
      .nav-controls {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }
    }
    
    /* Enhanced Responsive Design System - Optimized */
    .responsive-text-4xl { font-size: 1.875rem; line-height: 2rem; }
    .responsive-text-5xl { font-size: 2.5rem; line-height: 1; }
    .responsive-text-2xl { font-size: 1.25rem; line-height: 1.75rem; }
    .responsive-text-3xl { font-size: 1.5rem; line-height: 2rem; }
    .responsive-text-xl { font-size: 1rem; line-height: 1.5rem; }
    .responsive-text-lg { font-size: 0.9375rem; line-height: 1.375rem; }

    /* Mobile-first responsive breakpoints - Optimized */
    @media (min-width: 576px) {
      .responsive-text-4xl { font-size: 2.25rem; line-height: 1; }
      .responsive-text-5xl { font-size: 2.75rem; line-height: 1; }
      .responsive-text-2xl { font-size: 1.375rem; line-height: 1.875rem; }
      .responsive-text-3xl { font-size: 1.75rem; line-height: 2rem; }
      .responsive-text-xl { font-size: 1.125rem; line-height: 1.625rem; }
      .responsive-text-lg { font-size: 1rem; line-height: 1.5rem; }
    }

    @media (min-width: 640px) {
      .responsive-text-4xl { font-size: 2.5rem; line-height: 1; }
      .responsive-text-5xl { font-size: 3rem; line-height: 1; }
      .responsive-text-2xl { font-size: 1.5rem; line-height: 2rem; }
      .responsive-text-3xl { font-size: 1.875rem; line-height: 1; }
      .responsive-text-xl { font-size: 1.25rem; line-height: 1.75rem; }
      .responsive-text-lg { font-size: 1.125rem; line-height: 1.625rem; }
    }

    @media (min-width: 768px) {
      .responsive-text-4xl { font-size: 2.75rem; line-height: 1; }
      .responsive-text-5xl { font-size: 3.25rem; line-height: 1; }
      .responsive-text-2xl { font-size: 1.625rem; line-height: 2rem; }
      .responsive-text-3xl { font-size: 2rem; line-height: 1; }
      .responsive-text-xl { font-size: 1.375rem; line-height: 1.75rem; }
      .responsive-text-lg { font-size: 1.25rem; line-height: 1.75rem; }
    }

    @media (min-width: 1024px) {
      .responsive-text-4xl { font-size: 3rem; line-height: 1; }
      .responsive-text-5xl { font-size: 3.5rem; line-height: 1; }
      .responsive-text-2xl { font-size: 1.75rem; line-height: 1; }
      .responsive-text-3xl { font-size: 2.25rem; line-height: 1; }
      .responsive-text-xl { font-size: 1.5rem; line-height: 1.875rem; }
      .responsive-text-lg { font-size: 1.375rem; line-height: 1.875rem; }
    }
    
    /* Button system - Optimized */
    .btn-primary {
      font-size: 0.875rem;
      padding: 0.625rem 1.25rem;
      font-weight: 700;
      border-radius: 0.75rem;
      transition: all 0.2s ease;
    }
    
    .btn-primary.btn-cta {
      font-size: 1rem;
      padding: 0.75rem 1.5rem;
    }
    
    .btn-secondary {
      font-size: 0.875rem;
      padding: 0.625rem 1.25rem;
      font-weight: 600;
      border-radius: 0.75rem;
      transition: all 0.2s ease;
    }
    
    @media (max-width: 576px) {
      .btn-primary {
        font-size: 0.8rem;
        padding: 0.5rem 1rem;
      }
      .btn-primary.btn-cta {
        font-size: 0.9rem;
        padding: 0.625rem 1.25rem;
      }
      .btn-secondary {
        font-size: 0.8rem;
        padding: 0.5rem 1rem;
      }
    }
    
    /* Compact container system - Optimized for better page fit */
    .compact-container { 
      max-width: 800px; 
      margin: 0 auto; 
      padding: 0.75rem; 
    }
    @media (min-width: 576px) { .compact-container { padding: 1rem; } }
    @media (min-width: 768px) { 
      .compact-container { 
        max-width: 900px; 
        padding: 1.25rem; 
      } 
    }
    @media (min-width: 1024px) { 
      .compact-container { 
        max-width: 1000px; 
        padding: 1.5rem; 
      } 
    }
    
    /* Tablet-specific optimizations */
    @media (min-width: 768px) and (max-width: 1023px) {
      .compact-container {
        max-width: 85vw;
        padding: 1.25rem;
      }
    }
    
    /* Grid and container optimizations - Compact */
    .responsive-grid { display: grid; gap: 0.75rem; }
    @media (min-width: 576px) { .responsive-grid { gap: 1rem; } }
    @media (min-width: 768px) { .responsive-grid { gap: 1.25rem; } }
    @media (min-width: 1024px) { .responsive-grid { gap: 1.5rem; } }
    
    .responsive-container { padding: 0.75rem; }
    @media (min-width: 576px) { .responsive-container { padding: 1rem; } }
    @media (min-width: 768px) { .responsive-container { padding: 1.25rem; } }
    @media (min-width: 1024px) { .responsive-container { padding: 1.5rem; } }
  </style>
</head>
<body class="bg-gray-50 text-slate-900">
  <!-- HEADER -->
  <header class="brand-header">
    <div class="compact-container flex items-center justify-between py-3 md:py-4">
      <a href="index.html" class="flex items-center gap-3">
        <img src="iufp-logo.jpg" alt="IUFP logo" class="h-16 w-auto md:h-20" />
      </a>
      <nav class="hidden md:flex gap-5 text-base md:text-lg font-semibold">
        <a class="brand-link hover:opacity-90" href="index.html">Home</a>
        <a class="brand-link hover:opacity-90" href="students.html">Students</a>
        <a class="brand-link hover:opacity-90" href="universities.html">Universities</a>
        <a class="brand-link hover:opacity-90" href="partner-schools.html">Partner Schools</a>
        <a class="brand-link hover:opacity-90" href="vle.html">VLE</a>
        <a class="brand-link hover:opacity-90" href="iufp-alumni.html">Alumni</a>
        <a class="brand-link hover:opacity-90" href="contact.html">Contact Us</a>
      </nav>
      <button aria-label="Open menu" class="md:hidden crystal px-3 py-2 rounded-lg"
              onclick="document.getElementById('mnav').classList.toggle('hidden')">Menu</button>
    </div>
    <div id="mnav" class="md:hidden hidden px-4 pb-4 text-base font-semibold">
      <div class="crystal rounded-xl p-3 flex flex-col gap-1.5">
        <a class="brand-link" href="index.html">Home</a>
        <a class="brand-link" href="students.html">Students</a>
        <a class="brand-link" href="universities.html">Universities</a>
        <a class="brand-link" href="partner-schools.html">Partner Schools</a>
        <a class="brand-link" href="vle.html">VLE</a>
        <a class="brand-link" href="iufp-alumni.html">Alumni</a>
        <a class="brand-link" href="contact.html">Contact Us</a>
      </div>
    </div>
  </header>

  <!-- STICKY PROGRESS -->
  <div class="stickybar">
    <div class="compact-container py-2.5 flex items-center gap-3">
      <div class="flex items-center gap-2 text-sm font-bold">
        <span id="stepLabel">Step 1 of 7</span>
        <span class="text-slate-500" id="autosave">(saved)</span>
      </div>
      <div class="flex-1">
        <div class="progress rounded-full"><span id="prog" style="width:14%"></span></div>
      </div>
    </div>
  </div>

  <main>
    <!-- HERO -->
    <section class="compact-container pt-4 pb-3 md:pt-6 md:pb-4">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 lg:gap-6">
        <div class="flex-1">
          <h1 class="responsive-text-3xl md:responsive-text-4xl lg:responsive-text-5xl font-black leading-tight">IUFP Application</h1>
          <p class="mt-2 md:mt-3 responsive-text-lg opacity-95">A guided, step-by-step form with smart suggestions, autosave, and a clear review before submission.</p>
          <div class="mt-2 flex gap-1.5 flex-wrap">
            <span class="pill text-xs md:text-sm">ATHE-endorsed</span>
            <span class="pill text-xs md:text-sm">Direct & IY1 pathways</span>
            <span class="pill text-xs md:text-sm">Global partner network</span>
          </div>
        </div>
        <div class="crystal rounded-2xl p-2 md:p-2.5 flex items-center gap-2 md:gap-3 w-fit mx-auto lg:mx-0">
          <img src="iufp-logo.jpg" alt="IUFP logo" class="h-10 md:h-12 lg:h-14 w-auto">
          <img src="athe-logo.png" alt="ATHE logo" class="h-8 md:h-10 lg:h-12 w-auto">
        </div>
      </div>
    </section>

    <form id="appForm" class="compact-container pb-8 md:pb-16">
      <!-- STEP 1: PERSONAL INFORMATION -->
      <section class="step active bg-white rounded-2xl shadow-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 border border-gray-100" data-step="1">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Personal Information</h2>
          <p class="text-gray-600">Please provide your basic personal details</p>
        </div>
        
        <div class="space-y-4 md:space-y-6">
          <div class="form-group">
            <label class="block text-sm font-semibold text-gray-700 mb-3">Title</label>
            <div class="seg" role="radiogroup" aria-label="Title">
              <input type="radio" name="title" id="t-mr" value="Mr" checked><label for="t-mr">Mr</label>
              <input type="radio" name="title" id="t-mrs" value="Mrs"><label for="t-mrs">Mrs</label>
              <input type="radio" name="title" id="t-miss" value="Miss"><label for="t-miss">Miss</label>
              <input type="radio" name="title" id="t-ms" value="Ms"><label for="t-ms">Ms</label>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
            <div class="fl"><input placeholder=" " name="first" required><label>First Name *</label><div class="err">First name is required</div></div>
            <div class="fl"><input placeholder=" " name="last" required><label>Surname *</label><div class="err">Surname is required</div></div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
            <div class="fl"><input placeholder=" " name="middle"><label>Middle Name</label></div>
            <div class="fl"><input placeholder=" " type="date" name="dob" required><label>Date of Birth *</label><div class="err">Date of birth is required</div></div>
          </div>
          
          <div class="fl"><input placeholder=" " name="address" required><label>Address *</label><div class="err">Address is required</div></div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
            <div class="fl"><input placeholder=" " name="city" required><label>City *</label><div class="err">City is required</div></div>
            <div class="fl"><input placeholder=" " name="country" required><label>Country *</label><div class="err">Country is required</div></div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
            <div class="fl"><input placeholder=" " name="nationality" required><label>Nationality *</label><div class="err">Nationality is required</div></div>
            <div class="fl"><input placeholder=" " type="tel" name="phone" required><label>Telephone *</label><div class="err">Phone is required</div></div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
            <div class="fl"><input placeholder=" " type="email" name="email" required><label>Email *</label><div class="err">Valid email is required</div></div>
            <div class="fl"><input placeholder=" " type="file" name="photo" accept="image/*"><label>Passport Photo</label></div>
          </div>
        </div>
      </section>

      <!-- STEP 2: SUBJECTS -->
      <section class="step bg-white rounded-2xl shadow-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 border border-gray-100" data-step="2">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Subject Selection</h2>
          <p class="text-gray-600">Choose your elective subjects alongside the core curriculum</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 lg:gap-8">
          <div class="crystal rounded-2xl p-4 md:p-5 lg:p-6" style="background:var(--tint-a)">
            <h3 class="text-xl font-bold mb-4">Core Subjects</h3>
            <ul class="list-disc list-inside text-sm mt-2">
              <li>Academic English</li><li>Study Skills</li><li>IT Applications</li>
            </ul>
            <p class="text-xs mt-2 opacity-70">Fixed for all students.</p>
          </div>
          <div class="md:col-span-2 crystal rounded-2xl p-4 md:p-5 lg:p-6" style="background:var(--tint-b)">
            <h3 class="text-xl font-bold mb-4">Electives — choose <span id="selCount">0</span> / 3</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4 mt-4">
              <!-- Elective choices as modern cards -->
              <label class="choice"><input type="checkbox" name="electives" value="Accounting" onchange="updateElectives()"> Accounting</label>
              <label class="choice"><input type="checkbox" name="electives" value="Biology" onchange="updateElectives()"> Biology</label>
              <label class="choice"><input type="checkbox" name="electives" value="Business Studies" onchange="updateElectives()"> Business Studies</label>
              <label class="choice"><input type="checkbox" name="electives" value="Chemistry" onchange="updateElectives()"> Chemistry</label>
              <label class="choice"><input type="checkbox" name="electives" value="Computing" onchange="updateElectives()"> Computing</label>
              <label class="choice"><input type="checkbox" name="electives" value="Economics" onchange="updateElectives()"> Economics</label>
              <label class="choice"><input type="checkbox" name="electives" value="Government & Politics" onchange="updateElectives()"> Government & Politics</label>
              <label class="choice"><input type="checkbox" name="electives" value="Law" onchange="updateElectives()"> Law</label>
              <label class="choice"><input type="checkbox" name="electives" value="Mathematics" onchange="updateElectives()"> Mathematics</label>
              <label class="choice"><input type="checkbox" name="electives" value="Physics" onchange="updateElectives()"> Physics</label>
              <label class="choice"><input type="checkbox" name="electives" value="Psychology" onchange="updateElectives()"> Psychology</label>
              <label class="choice"><input type="checkbox" name="electives" value="Sociology" onchange="updateElectives()"> Sociology</label>
              <label class="choice"><input type="checkbox" name="electives" value="Fine Art" onchange="updateElectives()"> Fine Art</label>
            </div>
            <div class="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-100">
              <p class="text-sm text-blue-800 font-medium">💡 Tip: Choose three subjects that align with your intended degree</p>
            </div>
            <div id="electiveError" class="err mt-3">Please select exactly 3 electives.</div>
          </div>
        </div>
      </section>

      <!-- STEP 3: DEGREE PREFERENCES -->
      <section class="step bg-white rounded-2xl shadow-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 border border-gray-100" data-step="3">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Degree Preferences</h2>
          <p class="text-gray-600">Tell us about your intended degree and university preferences</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 lg:gap-8">
          <div class="crystal rounded-2xl p-4 md:p-5 lg:p-6" style="background:var(--tint-c)">
            <h3 class="text-xl font-bold mb-4">Suggested Pathways</h3>
            <div id="suggestions" class="mt-2 text-sm opacity-90">Choose electives first to see suggestions.</div>
          </div>
          <div class="crystal rounded-2xl p-4 md:p-5 lg:p-6" style="background:var(--tint-d)">
            <h3 class="text-xl font-bold mb-4">Your Preferences</h3>
            <div class="space-y-3 md:space-y-4">
              <div class="fl"><input placeholder=" " name="degree_intent"><label>Intended Degree (e.g., Computer Science)</label></div>
              <div class="fl"><input placeholder=" " name="uni_prefs"><label>University Preferences (max 3; comma‑separated)</label></div>
              <div class="fl">
                <input placeholder=" " list="schools" name="partner_school"><label>Partner School (if via a centre)</label>
              <datalist id="schools">
                <option value="Concord Business College (Ghana)"><option value="St. Elizabeth Academy - Karen (Kenya)"><option value="High End Study Centre (Kenya)">
                <option value="Atlantic Hall School (Nigeria)"><option value="D-Ivy Sixth Form College (Nigeria)"><option value="Olumawu School (Nigeria)">
                <option value="Topfaith University (Nigeria)"><option value="Redemption Gate Secondary School (Nigeria)"><option value="Noble Guide Academy (Nigeria)">
                <option value="Starfield College (Nigeria)"><option value="Prince Charles International Schools (Nigeria)"><option value="Distinct Star International College (Nigeria)">
                <option value="Taidob College (Nigeria)"><option value="Cambridgeshire Career Academy (India)"><option value="Innova Training Institute (UAE)">
                <option value="Study Connect International (Zambia)">
              </datalist>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 4: QUALIFICATIONS -->
      <section class="step bg-white rounded-2xl shadow-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 border border-gray-100" data-step="4">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Educational Qualifications</h2>
          <p class="text-gray-600">Add your previous educational qualifications and results</p>
        </div>
        
        <div class="crystal rounded-2xl p-4 md:p-5 lg:p-6" style="background:var(--tint-a)">
          <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0 mb-4">
            <h3 class="text-xl font-bold">Your Qualifications</h3>
            <button type="button" class="btn btn-secondary text-sm" onclick="addRow()">+ Add Qualification</button>
          </div>
          <div class="table-wrap mt-3">
            <table class="fancy" id="quals">
              <thead><tr><th>Year</th><th>Exam Body</th><th>Subjects</th><th>Level</th><th>Grades</th><th></th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="mt-3 flex flex-wrap gap-3 items-center">
            <div class="fl min-w-[260px]"><input placeholder=" " type="file" name="uploads" multiple><label>Upload certificates/results</label></div>
          </div>
        </div>
      </section>

      <!-- STEP 5: SPECIAL -->
      <section class="step bg-white rounded-2xl shadow-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 border border-gray-100" data-step="5">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
          <div class="crystal rounded-xl p-3 md:p-4" style="background:var(--tint-b)">
            <h3 class="font-extrabold">Special Information</h3>
            <div class="seg mt-2" role="radiogroup" aria-label="Disability">
              <input type="radio" name="disability" id="d-no" value="No" checked><label for="d-no">No</label>
              <input type="radio" name="disability" id="d-yes" value="Yes"><label for="d-yes">Yes</label>
            </div>
            <div class="fl mt-3" id="disDetails" style="display:none"><textarea placeholder=" " rows="4" name="disability_details"></textarea><label>Provide details (if Yes)</label></div>
          </div>
          <div class="crystal rounded-xl p-3 md:p-4" style="background:var(--tint-c)">
            <h3 class="font-extrabold">English & Referral</h3>
            <div class="seg mt-2" role="radiogroup" aria-label="IELTS taken?">
              <input type="radio" name="ielts_taken" id="ielts-no" value="No" checked><label for="ielts-no">IELTS not taken</label>
              <input type="radio" name="ielts_taken" id="ielts-yes" value="Yes"><label for="ielts-yes">IELTS taken</label>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4 mt-3" id="ieltsFields" style="display:none">
              <div class="fl"><input placeholder=" " name="ielts_overall"><label>IELTS Overall</label></div>
              <div class="fl"><input placeholder=" " name="ielts_bands"><label>IELTS Each Band</label></div>
            </div>
            <div class="seg mt-3" role="radiogroup" aria-label="How did you hear about IUFP?">
              <input type="radio" name="hear" id="h-ps" value="Partner School" checked><label for="h-ps">Partner School</label>
              <input type="radio" name="hear" id="h-f" value="Friend/Family"><label for="h-f">Friend/Family</label>
              <input type="radio" name="hear" id="h-web" value="Web Search"><label for="h-web">Web Search</label>
              <input type="radio" name="hear" id="h-bc" value="British Council"><label for="h-bc">British Council</label>
              <input type="radio" name="hear" id="h-ad" value="Advertisement"><label for="h-ad">Advertisement</label>
              <input type="radio" name="hear" id="h-oth" value="Other"><label for="h-oth">Other</label>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 6: TERMS -->
      <section class="step bg-white rounded-2xl shadow-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 border border-gray-100" data-step="6">
        <div class="crystal rounded-xl p-3 md:p-4" style="background:var(--tint-d)">
          <h3 class="text-2xl font-extrabold">Terms & Conditions</h3>
          <p class="hint">Scroll through and read. Acceptance is required to continue.</p>
          <div class="mt-3 p-4 bg-white border border-gray-200 rounded-xl max-h-72 overflow-auto text-sm leading-relaxed shadow-inner">
            <em>(Insert official IUFP Terms &amp; Conditions here.)</em><br><br>
            Acceptance fees, refunds, attendance rules, IELTS minimums, behaviour policy, data protection, and all other conditions apply.
          </div>
          <div class="mt-4 flex items-start gap-2">
            <input id="accept" type="checkbox" required>
            <label for="accept" class="text-sm">I have read and accept the Terms & Conditions.</label>
          </div>
          <div class="mt-4">
            <label class="font-bold">Signature (draw)</label>
            <canvas id="sig" width="600" height="170" class="border border-black/10 rounded-xl bg-white"></canvas>
            <div class="mt-2 flex gap-2">
              <button type="button" class="btn btn-prev" onclick="clearSig()">Clear</button>
              <button type="button" class="btn btn-prev" onclick="saveSig()">Save Signature</button>
              <input type="hidden" name="signatureData" id="signatureData">
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 7: REVIEW -->
      <section class="step bg-white rounded-2xl shadow-lg p-4 md:p-6 lg:p-8 mb-6 md:mb-8 border border-gray-100" data-step="7">
        <div class="crystal rounded-xl p-4" style="background:var(--tint-a)">
          <h3 class="text-2xl font-extrabold">Review your application</h3>
          <p class="hint">Edit any step before submission. A confirmation copy will be generated.</p>
          <pre id="review" class="mt-3 p-3 bg-white border border-gray-200 rounded-xl text-xs overflow-auto shadow-inner"></pre>
        </div>
      </section>

      <!-- NAVIGATION CONTROLS -->
      <div class="bg-white border-t border-gray-200 sticky bottom-0 z-50 mt-8 shadow-lg">
        <div class="compact-container py-4">
          <div class="nav-controls">
            <button type="button" class="btn btn-prev" onclick="prevStep()" id="prevBtn">
              ← Back
            </button>
            
            <div class="flex flex-col sm:flex-row items-center gap-3 sm:gap-4">
              <div class="text-xs sm:text-sm text-gray-500 bg-gray-50 px-2 sm:px-3 py-1 rounded-full" id="saveMsg" aria-live="polite">
                💾 All changes saved
              </div>
              
              <button type="button" class="btn btn-next" onclick="nextStep()" id="nextBtn">
                Continue →
              </button>
              
              <button type="button" class="btn btn-next" style="display:none" id="submitBtn" onclick="submitApp()">
                ✓ Submit Application
              </button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </main>

  <!-- FOOTER -->
  <div id="footer-container"></div>

  <script src="footer-component.min.js?v=1.0"></script>
  <script>
    if (window.IUFPFooter) {
      IUFPFooter.render('#footer-container', 'student');
    }
  </script>
  <script>
    // Wizard state
    let step = 1;
    const maxStep = 7;
    const form = document.getElementById('appForm');
    const stepLabel = document.getElementById('stepLabel');
    const prog = document.getElementById('prog');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const saveMsg = document.getElementById('saveMsg');
    const autosave = document.getElementById('autosave');

    function updateProgress(){
      stepLabel.textContent = `Step ${step} of ${maxStep}`;
      const pct = Math.round((step-1)/(maxStep-1)*100);
      prog.style.width = Math.max(14,pct)+'%';
      nextBtn.style.display = (step<maxStep) ? 'inline-block' : 'none';
      submitBtn.style.display = (step===maxStep) ? 'inline-block' : 'none';
      if(step===maxStep) buildReview();
      window.scrollTo({top:0,behavior:'smooth'});
      saveDraft();
    }

    function showStep(n){
      document.querySelectorAll('.step').forEach(s=> s.classList.remove('active'));
      document.querySelector(`.step[data-step="${n}"]`).classList.add('active');
      step = n; updateProgress();
    }
    function nextStep(){
      if(step===2 && document.querySelectorAll('input[name="electives"]:checked').length!==3){
        document.getElementById('electiveError').style.display = 'block';
        return;
      } else { document.getElementById('electiveError').style.display = 'none'; }
      if(step<maxStep) showStep(step+1);
    }
    function prevStep(){ if(step>1) showStep(step-1); }

    // Electives + suggestions
    const pathways = {
      "Business & Management": ["Accounting","Business Studies","Economics","Mathematics"],
      "Computing & IT": ["Computing","Mathematics","Physics"],
      "Engineering (Mechanical/Civil/Electrical)": ["Mathematics","Physics","Chemistry"],
      "Law & Politics": ["Law","Government & Politics","Business Studies","Sociology"],
      "Social Sciences (Psychology/Sociology)": ["Psychology","Sociology","Biology","Mathematics"],
      "Life Sciences (Biomed/Biology)": ["Biology","Chemistry","Mathematics","Psychology"],
      "Health & Pharmacy": ["Chemistry","Biology","Mathematics"],
      "Humanities & Arts": ["Fine Art","Sociology","Law"]
    };
    function updateElectives(){
      const sel = [...document.querySelectorAll('input[name="electives"]:checked')].map(c=>c.value);
      document.getElementById('selCount').textContent = sel.length;
      const sug = [];
      for(const [p, req] of Object.entries(pathways)){
        const overlap = req.filter(x=> sel.includes(x));
        if(overlap.length>=2) sug.push(`• ${p} <span class="pill">${overlap.join(', ')}</span>`);
      }
      document.getElementById('suggestions').innerHTML = sug.length? sug.map(x=>`<div class="mt-1">${x}</div>`).join('') : 'Choose electives first to see suggestions.';
      saveDraft();
    }

    // Qualifications table
    function addRow(){
      const tbody = document.querySelector('#quals tbody');
      const tr = document.createElement('tr');
      tr.innerHTML = `<td><input class="w-full" name="q_year" placeholder="YYYY"></td>
        <td><input class="w-full" name="q_body" placeholder="Exam body"></td>
        <td><input class="w-full" name="q_subjects" placeholder="Subjects"></td>
        <td><input class="w-full" name="q_level" placeholder="e.g., O/L, A/L, SSC, HSC"></td>
        <td><input class="w-full" name="q_grades" placeholder="e.g., A1, B2, 75%"></td>
        <td><button type="button" onclick="this.closest('tr').remove()">Remove</button></td>`;
      tbody.appendChild(tr);
      saveDraft();
    }
    addRow();

    // Toggleable fields
    const disRadios = document.querySelectorAll('input[name="disability"]');
    disRadios.forEach(r=> r.addEventListener('change', ()=>{
      document.getElementById('disDetails').style.display = (document.getElementById('d-yes').checked?'block':'none');
    }));
    const ieltsRadios = document.querySelectorAll('input[name="ielts_taken"]');
    ieltsRadios.forEach(r=> r.addEventListener('change', ()=>{
      document.getElementById('ieltsFields').style.display = (document.getElementById('ielts-yes').checked?'grid':'none');
    }));

    // Signature pad
    const canvas = document.getElementById('sig');
    const ctx = canvas.getContext('2d');
    let drawing=false,lastX=0,lastY=0;
    function pos(e){ const r=canvas.getBoundingClientRect(); const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left; const y=(e.touches?e.touches[0].clientY:e.clientY)-r.top; return [x,y]; }
    function start(e){ drawing=true; [lastX,lastY]=pos(e); }
    function draw(e){ if(!drawing) return; const [x,y]=pos(e); ctx.lineWidth=2; ctx.lineCap='round'; ctx.strokeStyle='#111827'; ctx.beginPath(); ctx.moveTo(lastX,lastY); ctx.lineTo(x,y); ctx.stroke(); [lastX,lastY]=[x,y]; e.preventDefault(); }
    function end(){ drawing=false; }
    canvas.addEventListener('mousedown', start); canvas.addEventListener('mousemove', draw); window.addEventListener('mouseup', end);
    canvas.addEventListener('touchstart', start, {passive:false}); canvas.addEventListener('touchmove', draw, {passive:false}); canvas.addEventListener('touchend', end);
    function clearSig(){ ctx.clearRect(0,0,canvas.width,canvas.height); }
    function saveSig(){ document.getElementById('signatureData').value = canvas.toDataURL('image/png'); alert('Signature captured.'); }

    // Review
    function buildReview(){
      const data = new FormData(form);
      data.set('electives', [...document.querySelectorAll('input[name="electives"]:checked')].map(x=>x.value).join(', '));
      const rows = [...document.querySelectorAll('#quals tbody tr')].map(r=>{
        const cells = r.querySelectorAll('input');
        return {year: cells[0].value, body: cells[1].value, subjects: cells[2].value, level: cells[3].value, grades: cells[4].value};
      });
      const obj = Object.fromEntries(data.entries());
      obj['qualifications'] = rows;
      document.getElementById('review').textContent = JSON.stringify(obj, null, 2);
    }

    // Autosave (localStorage)
    let saveTimer;
    function markSaving(){ autosave.textContent='(saving...)'; saveMsg.textContent='Saving...'; }
    function markSaved(){ autosave.textContent='(saved)'; saveMsg.textContent='All changes saved'; }
    function saveDraft(){
      if(saveTimer) clearTimeout(saveTimer);
      markSaving();
      saveTimer = setTimeout(()=>{
        const data = new FormData(form);
        const obj = Object.fromEntries(data.entries());
        obj['electives'] = [...document.querySelectorAll('input[name="electives"]:checked')].map(x=>x.value);
        obj['qualifications'] = [...document.querySelectorAll('#quals tbody tr')].map(r=>{
          const cells = r.querySelectorAll('input');
          return {year: cells[0].value, body: cells[1].value, subjects: cells[2].value, level: cells[3].value, grades: cells[4].value};
        });
        localStorage.setItem('iufpAppDraft', JSON.stringify(obj));
        markSaved();
      }, 400);
    }
    form.addEventListener('input', saveDraft);

    function restoreDraft(){
      const raw = localStorage.getItem('iufpAppDraft');
      if(!raw) return;
      try{
        const obj = JSON.parse(raw);
        for(const [k,v] of Object.entries(obj)){
          if(k==='electives' || k==='qualifications') continue;
          const el = form.querySelector(`[name="${k}"]`);
          if(el) el.value = v;
        }
        if(obj.electives){ obj.electives.forEach(val=>{ const cb = form.querySelector(`input[name="electives"][value="${val}"]`); if(cb) cb.checked = true; }); }
        updateElectives();
        const tbody = document.querySelector('#quals tbody'); tbody.innerHTML='';
        if(obj.qualifications && obj.qualifications.length){
          obj.qualifications.forEach(q=>{
            const tr = document.createElement('tr');
            tr.innerHTML = `<td><input class="w-full" name="q_year" value="${q.year||''}"></td>
              <td><input class="w-full" name="q_body" value="${q.body||''}"></td>
              <td><input class="w-full" name="q_subjects" value="${q.subjects||''}"></td>
              <td><input class="w-full" name="q_level" value="${q.level||''}"></td>
              <td><input class="w-full" name="q_grades" value="${q.grades||''}"></td>
              <td><button type="button" onclick="this.closest('tr').remove()">Remove</button></td>`;
            tbody.appendChild(tr);
          });
        } else addRow();
        // Toggle visibility
        document.getElementById('disDetails').style.display = (document.getElementById('d-yes').checked?'block':'none');
        document.getElementById('ieltsFields').style.display = (document.getElementById('ielts-yes').checked?'grid':'none');
      }catch(e){console.warn(e);}
    }
    restoreDraft();

    // Submission (prototype)
    function submitApp(){
      if(step!==maxStep) showStep(maxStep);
      if(!document.getElementById('accept').checked){ alert('Please accept the Terms & Conditions.'); return; }
      buildReview();
      const blob = new Blob([document.getElementById('review').textContent], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'iufp-application.json'; a.click();
      alert('Application captured (prototype). In production, this posts securely to Admissions.');
    }

    // Init
    function init(){ showStep(1); }
    init();
  </script>
</body>
</html>
